<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>How to Install Metasploit on OS X Mavericks and Yosemite, an Updated Guide | evilsocket || Simone</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Today I tried to install the Metasploit framework both on my Mavericks MacBook Pro and my Yosemite MacBook Air, unfortunately all the guides I’ve found seem to be quite outdated and various hacks are">
<meta name="keywords" content="guide,howto,metasploit,osx,mavericks,yosemite,installation">
<meta property="og:type" content="article">
<meta property="og:title" content="How to Install Metasploit on OS X Mavericks and Yosemite, an Updated Guide">
<meta property="og:url" content="https://www.evilsocket.net/2015/01/16/how-to-install-metasploit-on-os-x-mavericks-and-yosemite-an-updated-guide/index.html">
<meta property="og:site_name" content="evilsocket || Simone">
<meta property="og:description" content="Today I tried to install the Metasploit framework both on my Mavericks MacBook Pro and my Yosemite MacBook Air, unfortunately all the guides I’ve found seem to be quite outdated and various hacks are">
<meta property="og:updated_time" content="2015-01-17T21:50:35.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to Install Metasploit on OS X Mavericks and Yosemite, an Updated Guide">
<meta name="twitter:description" content="Today I tried to install the Metasploit framework both on my Mavericks MacBook Pro and my Yosemite MacBook Air, unfortunately all the guides I’ve found seem to be quite outdated and various hacks are">
<meta name="twitter:creator" content="@evilsocket">
<link rel="publisher" href="https://plus.google.com/104794390596458308819">

  <meta name="google-site-verification" content="6qdVG0z0lac2ceITCoTCNm15CPp3K9Sq41_5IK4OLKM">

  
    <link rel="alternate" href="/atom.xml" title="evilsocket || Simone" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-22026549-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script type="text/javascript" src="https://blockchain.info/Resources/js/pay-now-button.js"></script>
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">evilsocket || Simone</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">INTP :: Hacker :: I break stuff to make the world a safer place.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/books.html">Books</a>
        
          <a class="main-nav-link" href="/random-facts-about-me.html">About Me</a>
        
      </nav>
      <nav id="sub-nav">
        <a id="nav-github-link" class="nav-icon" href="https://github.com/evilsocket" target="_blank"></a>
        <a id="nav-linkedin-link" class="nav-icon" href="http://it.linkedin.com/in/simonemargaritelli/" target="_blank"></a>
        <a id="nav-twitter-link" class="nav-icon" href="https://twitter.com/evilsocket" target="_blank"></a>
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://www.evilsocket.net"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-how-to-install-metasploit-on-os-x-mavericks-and-yosemite-an-updated-guide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      How to Install Metasploit on OS X Mavericks and Yosemite, an Updated Guide
    </h1>
  

      </header>
    
    <br/>
    <div class="article-meta">
      Posted on <time datetime="2015-01-16T17:31:00.000Z" itemprop="datePublished">2015-01-16</time>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <br/>
        <div class="addthis_sharing_toolbox"></div>
        <p>Today I tried to install the <strong>Metasploit</strong> framework both on my Mavericks MacBook Pro and my Yosemite MacBook Air, unfortunately all the guides I’ve found seem to be quite outdated and various hacks are needed to make the actual process really work.<br>So I decided to write an updated guide on my blog, just in case someone else will need it ^_^</p>
<a id="more"></a>
<h2 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h2><p>First thing first, you will need to install some requirements, if you are a developer/hacker you will probably have them already, but you never know.</p>
<h5 id="XCode-Command-Line-Tools"><a href="#XCode-Command-Line-Tools" class="headerlink" title="XCode Command Line Tools"></a>XCode Command Line Tools</h5><p>Issue the following command on your terminal:</p>
<pre><code>xcode-select --install
</code></pre><p>And choose the <strong>Install</strong> option to install XCode command line tools needed for compilation, etc.</p>
<h5 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h5><p>Make sure you have the latest <strong>Java SE JDK</strong> from Oracle, you can verify it issuing the command:</p>
<pre><code>java -version
</code></pre><p>Otherwise download it from <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="external">here</a> and install it.</p>
<h5 id="Homebrew"><a href="#Homebrew" class="headerlink" title="Homebrew"></a>Homebrew</h5><p>Homebrew is a package manager for OS X, well not really a package manager since it just manages “formulas”, which are basically build scripts for open source projects ( very much like Arch / Slackware Linux build scripts ), you will need it to install other libraries and binaries.</p>
<pre><code>ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;
</code></pre><p>Then update your <strong>PATH</strong> environment variable with the homebrew binary folder:</p>
<pre><code>echo PATH=/usr/local/bin:/usr/local/sbin:$PATH &gt;&gt; ~/.bash_profile
source ~/.bash_profile
brew tap homebrew/versions
</code></pre><h5 id="Nmap"><a href="#Nmap" class="headerlink" title="Nmap"></a>Nmap</h5><p>Once you have homebrew installed, you can start using it ( <strong>NOTE:</strong> Don’t use it with <strong>sudo</strong>, it’s not required ):</p>
<pre><code>brew install nmap
</code></pre><h5 id="LibXML2"><a href="#LibXML2" class="headerlink" title="LibXML2"></a>LibXML2</h5><p>This is needed by the nokogiri gem:</p>
<pre><code>brew install libxml2
</code></pre><h5 id="PostgreSQL"><a href="#PostgreSQL" class="headerlink" title="PostgreSQL"></a>PostgreSQL</h5><pre><code>brew install postgresql --without-ossp-uuid
</code></pre><h5 id="PostgreSQL-Configuration"><a href="#PostgreSQL-Configuration" class="headerlink" title="PostgreSQL Configuration"></a>PostgreSQL Configuration</h5><p>Initialize the database ( you might already have this file, it’s not a problem ):</p>
<pre><code>initdb /usr/local/var/postgres
</code></pre><p>Make sure it’s started after user login:</p>
<pre><code>mkdir -p ~/Library/LaunchAgents
cp /usr/local/Cellar/postgresql/9.4.0/homebrew.mxcl.postgresql.plist ~/Library/LaunchAgents/
launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist
</code></pre><p>( replace 9.4.0 with the version you have installed )</p>
<p>Create the db for the metasploit framework:</p>
<pre><code>createuser msf -P -h localhost
createdb -O msf msf -h localhost
</code></pre><p>( Take note of the password you used, you will need it later )</p>
<h5 id="Clone-the-Metasploit-Repo"><a href="#Clone-the-Metasploit-Repo" class="headerlink" title="Clone the Metasploit Repo"></a>Clone the Metasploit Repo</h5><p>Time for metasploit itself:</p>
<pre><code>cd /usr/local/share/
git clone https://github.com/rapid7/metasploit-framework.git
cd metasploit-framework
for MSF in $(ls msf*); do ln -s /usr/local/share/metasploit-framework/$MSF /usr/local/bin/$MSF;done
sudo chmod go+w /etc/profile
sudo echo export MSF_DATABASE_CONFIG=/usr/local/share/metasploit-framework/config/database.yml &gt;&gt; /etc/profile
</code></pre><h5 id="HACK-Nokogiri-Gem"><a href="#HACK-Nokogiri-Gem" class="headerlink" title="HACK: Nokogiri Gem"></a>HACK: Nokogiri Gem</h5><p>This one is hackish, but that’s the way I’ve found to make it work:</p>
<pre><code>bundle config build.nokogiri &quot;--use-system-libraries --with-xml2-include=/usr/local/opt/libxml2/include/libxml2&quot;
</code></pre><h5 id="HACK-PG-Gem"><a href="#HACK-PG-Gem" class="headerlink" title="HACK: PG Gem"></a>HACK: PG Gem</h5><p>Another hackish one:</p>
<pre><code>sudo env ARCHFLAGS=&quot;-arch x86_64&quot; gem install pg
</code></pre><h5 id="Other-Gems"><a href="#Other-Gems" class="headerlink" title="Other Gems"></a>Other Gems</h5><p>Finally, within the metasploit folder, use bundle to install the remaining gems:</p>
<pre><code>bundle install
</code></pre><h5 id="HACK-Fix-the-‘robots’-Gem-Permissions"><a href="#HACK-Fix-the-‘robots’-Gem-Permissions" class="headerlink" title="HACK: Fix the ‘robots’ Gem Permissions"></a>HACK: Fix the ‘robots’ Gem Permissions</h5><p>If you will run msf as a normal user, you will have trouble with the robots gem, unless you fix its permissions:</p>
<pre><code>sudo chmod o+r /Library/Ruby/Gems/2.0.0/gems/robots-0.10.1/lib/robots.rb
</code></pre><h5 id="Create-the-Database-Configuration"><a href="#Create-the-Database-Configuration" class="headerlink" title="Create the Database Configuration"></a>Create the Database Configuration</h5><pre><code>vim /usr/local/share/metasploit-framework/config/database.yml
</code></pre><p>Paste the following text:</p>
<pre><code>production:
 adapter: postgresql
 database: msf
 username: msf
 password: PUT_YOUR_POSTGRESQL_PASSWORD_HERE
 host: 127.0.0.1
 port: 5432
 pool: 75
 timeout: 5
</code></pre><p>( keep the spacing since <strong>yml</strong> files are “space sensitive” )</p>
<p>And update your environment:</p>
<pre><code>source /etc/profile
source ~/.bash_profile
</code></pre><h2 id="Done"><a href="#Done" class="headerlink" title="Done"></a>Done</h2><p>Well, you’re ready to go now, enjoy metasploit on OSX :)</p>
<pre><code>msfconsole
</code></pre>
      
      
      <hr/>
      <center>

        <div style="font-size:16px;margin:0 auto;width:300px" class="blockchain-btn"
        data-address="16xFm5NrKV6eEV4TTDEUdkjqe62L352apW"
        data-shared="false">
        <div class="blockchain stage-begin">
        <img src="https://blockchain.info/Resources/buttons/donate_64.png"/>
        </div>
        <div class="blockchain stage-loading" style="text-align:center">
        <img src="https://blockchain.info/Resources/loading-large.gif"/>
        </div>
        <div class="blockchain stage-ready">
        <p align="center">Please Donate To Bitcoin Address: <b>[[address]]</b></p>
        <p align="center" class="qr-code"></p>
        </div>
        <div class="blockchain stage-paid">
        Donation of <b>[[value]] BTC</b> Received. Thank You.
        </div>
        <div class="blockchain stage-error">
        <font color="red">[[error]]</font>
        </div>
        </div>

        <p style="font-size:27px">
            Let's stay in touch!
            <br/>
            <a href="https://twitter.com/evilsocket" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @evilsocket</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </p>
      </center>
      
    </div>
    <footer class="article-footer">
      
        <a href="https://www.evilsocket.net/2015/01/16/how-to-install-metasploit-on-os-x-mavericks-and-yosemite-an-updated-guide/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/guide/">guide</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/howto/">howto</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/installation/">installation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mavericks/">mavericks</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/metasploit/">metasploit</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/osx/">osx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/yosemite/">yosemite</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/01/29/nike-fuelband-se-ble-protocol-reversed/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Nike+ FuelBand SE BLE Protocol Reversed
        
      </div>
    </a>
  
  
    <a href="/2014/11/03/dsploit-merges-with-zimperium-zanti2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">dSploit Merges With ZImperium zANTI2</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Simone Margaritelli<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4da572964da15ce9" async="async"></script>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/books.html" class="mobile-nav-link">Books</a>
  
    <a href="/random-facts-about-me.html" class="mobile-nav-link">About Me</a>
  
</nav>
    
<script>
  var disqus_shortname = 'evilsocket';
  
  var disqus_url = 'https://www.evilsocket.net/2015/01/16/how-to-install-metasploit-on-os-x-mavericks-and-yosemite-an-updated-guide/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>